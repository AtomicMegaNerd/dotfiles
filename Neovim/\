local M = {}

local do_map = function(mode, keys, func, desc, plugin)
	desc = desc or nil
	plugin = plugin or nil
	if plugin then
		desc = plugin .. ": " .. desc
	end
	if desc then
		vim.keymap.set(mode, keys, func, { desc = desc })
	else
		vim.keymap.set(mode, keys, func)
	end
end

M.nmap = function(keys, func, desc, plugin)
	return do_map("n", keys, func, desc, plugin)
end

M.imap = function(keys, func, desc, plugin)
	return do_map("i", keys, func, desc, plugin)
end

M.do_import = function(module)
	local status, lib = pcall(require, module)
	if status then
		return lib
	else
		vim.notify("Error importing " .. module, vim.log.levels.ERROR)
		return nil
	end
end

return M
